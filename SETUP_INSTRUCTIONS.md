# DevCommerce - Инструкции по настройке

## Описание проекта

DevCommerce - это современная e-commerce платформа с полной системой аутентификации, построенная на Django (бэкенд) и Next.js (фронтенд).

## Функции системы аутентификации

### Бэкенд (Django)
- ✅ Кастомная модель пользователя с email как USERNAME_FIELD
- ✅ JWT аутентификация со сроком жизни токена 1 день
- ✅ REST API эндпоинты:
  - `POST /api/auth/register/` - Регистрация
  - `POST /api/auth/login/` - Вход
  - `GET /api/auth/me/` - Получение данных пользователя
  - `PUT /api/auth/update-profile/` - Обновление профиля
  - `POST /api/auth/password-reset-request/` - Запрос сброса пароля
  - `POST /api/auth/password-reset-confirm/` - Подтверждение сброса пароля
  - `POST /api/auth/change-password/` - Смена пароля
  - `POST /api/auth/verify-email/` - Подтверждение email
  - `POST /api/auth/resend-verification/` - Повторная отправка кода
- ✅ Email верификация с 6-значными кодами
- ✅ Сброс пароля через email с кодами подтверждения
- ✅ CORS настройки для фронтенда
- ✅ Админ-панель для управления пользователями

### Фронтенд (Next.js)
- ✅ Глобальный AuthContext с useAuth хуком
- ✅ Автоматическая проверка аутентификации при загрузке/переходах
- ✅ API функции в `src/api/auth/api.js`
- ✅ Интегрированная форма аутентификации с:
  - Регистрацией и входом
  - Сбросом пароля через email
  - Красивыми анимированными компонентами
- ✅ Страница Dashboard для авторизованных пользователей
- ✅ Адаптивная навигация на главной странице
- ✅ Автоматические редиректы

## Настройка проекта

### 1. Настройка бэкенда

```bash
# Переход в папку бэкенда
cd devcommercebackend

# Установка зависимостей
pip install -r r.txt

# Применение миграций
python manage.py migrate

# Создание суперпользователя
python manage.py createsuperuser

# Запуск сервера
python manage.py runserver
```

### 2. Настройка фронтенда

```bash
# Переход в папку фронтенда
cd devcommercefrontend

# Установка зависимостей
npm install

# Создание файла окружения
echo "NEXT_PUBLIC_API_URL=http://localhost:8000/api" > .env.local

# Запуск dev сервера
npm run dev
```

## Использование

### 1. Запуск проектов
- Бэкенд: `http://localhost:8000`
- Фронтенд: `http://localhost:3000`
- Админ-панель: `http://localhost:8000/admin`

### 2. Тестирование системы
1. Откройте `http://localhost:3000`
2. Нажмите "Начать" для перехода к аутентификации
3. Зарегистрируйтесь или войдите в систему
4. После входа вы будете перенаправлены в Dashboard
5. В Dashboard можно:
   - Просматривать и редактировать профиль
   - Подтверждать email
   - Менять пароль
   - Выходить из системы

### 3. Сброс пароля
1. На странице входа нажмите "Забыли пароль?"
2. Введите email
3. Проверьте консоль Django сервера - там будет код
4. Введите код и новый пароль

## Структура проекта

```
DevHub/
├── devcommercebackend/          # Django бэкенд
│   ├── authentication/          # Приложение аутентификации
│   │   ├── models.py           # Модели User, PasswordResetCode, EmailVerificationCode
│   │   ├── views.py            # API views
│   │   ├── serializers.py      # DRF сериализаторы
│   │   ├── authentication.py   # JWT аутентификация
│   │   ├── utils.py            # Email утилиты
│   │   └── urls.py             # URL маршруты
│   └── devcommercebackend/
│       └── settings.py         # Настройки Django
├── devcommercefrontend/         # Next.js фронтенд
│   ├── src/
│   │   ├── api/auth/api.js     # API функции
│   │   ├── contexts/AuthContext.js  # Глобальный контекст
│   │   ├── app/
│   │   │   ├── auth/page.tsx   # Страница аутентификации
│   │   │   └── dashboard/      # Dashboard для пользователей
│   │   └── components/ui/      # UI компоненты
│   └── .env.local              # Переменные окружения
└── SETUP_INSTRUCTIONS.md       # Эта инструкция
```

## Особенности реализации

### JWT Токены
- Срок жизни: 1 день
- Автоматическое обновление в localStorage
- Проверка валидности при каждом запросе

### Email система
- В разработке используется console backend
- Коды отображаются в консоли Django сервера
- Для продакшена нужно настроить SMTP

### Безопасность
- CORS настроен для localhost:3000
- Валидация паролей Django
- Защита от CSRF
- Хеширование паролей

## Дальнейшее развитие

Система готова для:
- Добавления OAuth (Google, GitHub)
- Интеграции с реальным SMTP сервером
- Добавления ролей и разрешений
- Расширения профиля пользователя
- Добавления уведомлений

## Поддержка

Все основные функции реализованы и протестированы. Система готова к использованию и дальнейшему развитию! 